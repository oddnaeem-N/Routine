<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Right Form of Verbs App</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    background: #f4f4f9;
  }
  h1 {
    text-align: center;
  }
  .card {
    max-width: 600px;
    margin: 20px auto;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    text-align: center;
  }
  .sentence {
    font-size: 24px;
    margin-bottom: 15px;
  }
  .answer-highlight {
    color: green;
    font-weight: bold;
  }
  .rule {
    margin-top: 10px;
    color: #00796b;
    font-style: italic;
    display: none;
  }
  button {
    margin: 5px;
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
  }
  .btn-show {
    background: #1976d2;
    color: #fff;
  }
  .pagination {
    text-align: center;
    margin-top: 20px;
  }
  .pagination button {
    background: #eee;
    margin: 0 3px;
  }
  .pagination .active {
    background: #1976d2;
    color: #fff;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Right Form of Verbs</h1>

<div id="cardsContainer"></div>
<div class="pagination" id="pagination"></div>

<script>
let rules = [];
let currentPage = 1;
const rulesPerPage = 10;

fetch('rules.json')
  .then(response => response.json())
  .then(data => {
    rules = data;
    renderPage();
    renderPagination();
  })
  .catch(error => console.error('Error loading JSON:', error));

function renderPage() {
  const container = document.getElementById('cardsContainer');
  container.innerHTML = '';

  const start = (currentPage - 1) * rulesPerPage;
  const end = start + rulesPerPage;
  const pageItems = rules.slice(start, end);

  pageItems.forEach((item) => {
    const card = document.createElement('div');
    card.className = 'card';

    const sentenceEl = document.createElement('div');
    sentenceEl.className = 'sentence';
    sentenceEl.innerHTML = "Q: " + item.sentence.replace(item.answer, "_____");

    const showBtn = document.createElement('button');
    showBtn.className = 'btn-show';
    showBtn.textContent = "Show Answer";

    const ruleBox = document.createElement('div');
    ruleBox.className = 'rule';

    showBtn.addEventListener('click', () => {
      sentenceEl.innerHTML = "Q: " + item.sentence.replace(
        item.answer,
        `<span class="answer-highlight">${item.answer}</span>`
      );
      ruleBox.innerHTML = "Rule: " + item.rule;
      ruleBox.style.display = 'block';
    });

    card.appendChild(sentenceEl);
    card.appendChild(showBtn);
    card.appendChild(ruleBox);
    container.appendChild(card);
  });
}

function renderPagination() {
  const pagination = document.getElementById('pagination');
  pagination.innerHTML = '';

  const totalPages = Math.ceil(rules.length / rulesPerPage);

  // Prev button
  const prevBtn = document.createElement('button');
  prevBtn.textContent = "Prev";
  prevBtn.disabled = currentPage === 1;
  prevBtn.addEventListener('click', () => {
    if (currentPage > 1) {
      currentPage--;
      renderPage();
      renderPagination();
    }
  });
  pagination.appendChild(prevBtn);

  // Number buttons
  for (let i = 1; i <= totalPages; i++) {
    const btn = document.createElement('button');
    btn.textContent = i;
    if (i === currentPage) btn.classList.add('active');

    btn.addEventListener('click', () => {
      currentPage = i;
      renderPage();
      renderPagination();
    });

    pagination.appendChild(btn);
  }

  // Next button
  const nextBtn = document.createElement('button');
  nextBtn.textContent = "Next";
  nextBtn.disabled = currentPage === totalPages;
  nextBtn.addEventListener('click', () => {
    if (currentPage < totalPages) {
      currentPage++;
      renderPage();
      renderPagination();
    }
  });
  pagination.appendChild(nextBtn);
}
</script>

</body>
</html>
