<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Right Form of Verbs App</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    background: #f4f4f9;
  }
  h1 {
    text-align: center;
  }
  .card {
    max-width: 600px;
    margin: 20px auto;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    text-align: center;
  }
  .sentence {
    font-size: 36px;
    margin-bottom: 15px;
  }
  .answer-highlight {
    color: green;
    font-weight: bold;
  }
  .rule {
    margin-top: 20px;
    color: #00796b;
    font-style: italic;
    display: none;
  }
  button {
    margin: 5px;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 18px;
  }
  .btn-show {
    background: #1976d2;
    color: #fff;
  }
  .btn-next {
    background: #388e3c;
    color: #fff;
  }
</style>
</head>
<body>

<h1>Right Form of Verbs</h1>

<div class="card">
  <div class="sentence" id="sentence"></div>
  <button class="btn-show" id="showBtn">Show Answer</button>
  <button class="btn-next" id="nextBtn">Next</button>
  <div class="rule" id="ruleBox"></div>
</div>

<script>
let rules = [];
let currentIndex = 0;
let answered = false;

fetch('rules.json')
  .then(response => response.json())
  .then(data => {
    rules = data;
    showQuestion();
  })
  .catch(error => console.error('Error loading JSON:', error));

function showQuestion() {
  answered = false;
  const sentenceEl = document.getElementById('sentence');
  const ruleBox = document.getElementById('ruleBox');
  ruleBox.style.display = 'none';

  const current = rules[currentIndex];
  // ‡¶ó‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶ø‡¶≤‡¶ø‡¶Ç ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø answer ‡¶ï‡ßá "____" ‡¶¶‡¶ø‡ßü‡ßá replace
  const questionText = current.sentence.replace(current.answer, "_____");
  sentenceEl.innerHTML = "Q: " + questionText;
}

document.getElementById('showBtn').addEventListener('click', () => {
  if (answered) return;
  const current = rules[currentIndex];
  const sentenceEl = document.getElementById('sentence');
  const ruleBox = document.getElementById('ruleBox');

  // answer ‡¶¨‡¶∏‡¶æ‡¶®‡ßã (‡¶∏‡¶¨‡ßÅ‡¶ú + bold)
  const answeredText = current.sentence.replace(
    current.answer,
    `<span class="answer-highlight">${current.answer}</span>`
  );
  sentenceEl.innerHTML = "Q: " + answeredText;

  // rule ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
  ruleBox.innerHTML = "Rule: " + current.rule;
  ruleBox.style.display = 'block';

  answered = true;
});

document.getElementById('nextBtn').addEventListener('click', () => {
  if (currentIndex < rules.length - 1) {
    currentIndex++;
    showQuestion();
  } else {
    alert("üéâ ‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶∂‡ßá‡¶∑!");
  }
});
</script>

</body>
</html>
